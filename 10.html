<!-- PROGRAM-2 : AJAX Example (Explained for quick memory) -->
<!DOCTYPE html>
<html>
<head>
<title>AJAX PROGRAM</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<style>

/* Apply SAME margin and padding to everything */
* {
    margin: 10px;
    padding: 10px;
    box-sizing: border-box;
}

/* Basic styles */
body {
    font-family: Arial, sans-serif;
    background: #f3f4ff;
    text-align: center;
}

button {
    width: 100%;
    background: #007bff;
    border: none;
    color: white;
    border-radius: 6px;
    font-size: 16px;
    cursor: pointer;
}

button:hover {
    opacity: 0.9;
}

#output {
    background: #eef6ff;
    border: 1px solid #cfe2ff;
    border-radius: 6px;
    display: none;
    text-align: left;
}

</style>

</head>
<body>

<h2>AJAX Operations</h2>

<!-- 4 buttons for 4 features -->
<button id="plain">Plain AJAX</button>
<button id="jquery">jQuery AJAX</button>
<button id="json">getJSON()</button>
<button id="parse">parseJSON()</button>

<div id="output"></div>

<script>

/* Common function to display */
function show(){output.style.display="block"}

/* a) Without jQuery â€“ XMLHttpRequest */
plain.onclick=function(){
 let x=new XMLHttpRequest();               // create request
 x.open("GET","textfile.txt",true);        // file call
 x.onload=function(){
   output.innerText = x.status==200?x.responseText:"Error";
   show();
 }
 x.send();                                 // send request
}

/* b) With jQuery AJAX */
$("#jquery").click(function(){
 $.ajax({
   url:"textfile.txt",
   success:(d)=>output.innerText=d,        // show response
   error:()=>output.innerText="Error"
 }).always(show)
})

/* c) getJSON method */
$("#json").click(function(){
 $.getJSON("data.json",function(d){
   output.innerText=JSON.stringify(d,null,2); // pretty JSON
 }).fail(()=>output.innerText="Error").always(show)
})

/* d) parseJSON */
$("#parse").click(function(){
 $.get("data.json",function(data){
  try{
   let j = typeof data=="string"?$.parseJSON(data):data;
   output.innerText=JSON.stringify(j,null,2);
  }catch(e){output.innerText="Parse Error";}
 }).fail(()=>output.innerText="Error").always(show)
})

</script>
</body>
</html>